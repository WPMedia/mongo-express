{% extends 'layout.html' %}

{% block breadcrumb %}

{% include 'breadcrumb.html' %}

{% endblock %}

{% block title %}Restore database{% endblock %}




{% block content %}


<h2>{{action}} Databases</h2>
<table class="table">
  <thead>
    <tr>
      <th>Date/time</th>
      <th>Db name</th>
      <th>Collections</th>
      <th>Actions</th>
    </tr>
  </thead>
  {% for file in fileList|reverse %}
  <tbody>
    <tr>
      <td style="padding-left:10px">{{ file.backupDate }}</td>
      <td style="padding-left:10px">{{ file.dbname }}</td>
      <td style="padding-left:10px">{{ file.collections }}</td>
      {% if !settings.read_only %}
      <td class="col-md-2">
        <button class="btn btn-warning btn-block restore-button" file-name="{{ file.filename }}" childof="db-{{ file.filename }}">
          <span class="glyphicon glyphicon-paste"></span> Restore
        </button>
      </td>
      {% endif %}
    </tr>
  </tbody>
  {% endfor %}
</table>
{% if !settings.read_only %}
<div id="confirm-backup" class="modal fade" role="dialog" aria-labelledby="confirmBackupLabel">
  <div class="modal-dialog" role="document">
    <div class="modal-content">

      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title" id="myModalLabel">Backup database</h4>
      </div>

      <div class="modal-body">
        <p>
          Be careful! You are about to backup whole <strong><span id="modal-database-name"></span></strong> database.
        </p>
        <p>
          <label for="confirmation-input">Type the database name to proceed.</label>
          <input type="text" id="confirmation-input" name="confirmation-input" shouldbe="" value="" />
        </p>
      </div>

      <div class="modal-footer">
        <button type="button" data-dismiss="modal" class="btn  btn-success" id="backup">Backup</button>
        <button type="button" data-dismiss="modal" class="btn btn-default">Cancel</button>
      </div>
    </div>
  </div>
</div>



{% endif %}

{#
  # Still need to add global lock time stats and replica set stats
#}

{% endblock %}
